@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Order.cshtml";
}
<style>
    .ui-jqgrid .table-bordered td { height: 34px; }
</style>
<script>
    var $gridList = null;

    $(function () {
        initControl();
        var mydata = [
                 { invdate: "2007-10-01", name: "test", note: "", amount: "200.00", tax: "10.00", total: "210.00" },
                 { invdate: "2007-10-02", name: "test2", note: "", amount: "300.00", tax: "20.00", total: "320.00" },
                 { invdate: "2007-09-01", name: "test3", note: "", amount: "400.00", tax: "30.00", total: "430.00" },
        ];

        gridList();

        $gridList.jqGrid().clearGridData();
        $gridList.jqGrid('setGridParam', { 
            data: mydata,
        }).trigger("reloadGrid");
        
        //for (var i = 0; i <= mydata.length; i++) {
        //    $gridList.jqGrid('addRowData', i + 1, mydata[i]);
        //}
    })
    function initControl() {
        $("#F_SupplierID").bindSelect();
        $("#F_PurchaserID").bindSelect();
        $("#F_BillType").bindSelect();
        $("#F_TruckID").bindSelect();
        $("#F_DriverID").bindSelect();
        $("#F_IsStockFinished").bindSelect();
        $("#F_Status").bindSelect();
        $("#F_CreateUserID").bindSelect();
        $("#F_UpdateUserID").bindSelect();
        $("#F_ConfirmUserID").bindSelect();
        $('#F_BillDate').bindDate();
        $('#F_PostDate').bindDate();
    }
    function gridList() {
        $gridList = $("#gridList");
        $gridList.dataGrid({
            datatype: "local",
            height: $(window).height() - 128,            
            cellEdit: true,
            isTools: false,
            cellsubmit: 'clientArray',
            colModel: [               
                {
                    name: 'invdate', classes: 'formValue', index: 'invdate', width: 90, sorttype: "date", editable: true, edittype: 'select', editoptions: {
                        value: "一:一年级;二:二年级;三:三年级;四:四年级;五:五年级;六:六年级", dataInit: function (element) {
                            $(element).bindSelect();
                        }
                    }
                },
                { name: 'name', classes: 'formValue', index: 'name', width: 100, editable: true },
                { name: 'note', classes: 'formValue', index: 'note', sortable: false },
                { name: 'amount', classes: 'formValue', index: 'amount', width: 80, align: "right", sorttype: "float" },
                { name: 'tax', classes: 'formValue', index: 'tax', width: 80, align: "right", sorttype: "float" },
                { name: 'total', classes: 'formValue', index: 'total', width: 80, align: "right", sorttype: "float" },
                
            ],
            afterSaveCell: function (rowid, cellname, value, iRow, iCol) {
                console.log(rowid, cellname, value, iRow, iCol);
                //if (cellname == 'cityname') { //为联动的select列编辑，更新cityid，传入的value桉树为option的value，不是text
                $gridList.jqGrid('setRowData', rowid, { note: value });
                //}
            },
        });

    }

</script>

<form id="form1" class="form">
    <div class="row">
        <div class="col-xs-12">
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_SupplierID" style="line-height:30px;text-align:right">供 应 商</label>
                    <div class="col-xs-8">
                        <select id="F_SupplierID" name="F_SupplierID" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_PurchaserID"  style="line-height:30px;text-align:right">采 购 员</label>
                    <div class="col-xs-8">
                        <select id="F_PurchaserID" name="F_PurchaserID" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_BillType" style="line-height:30px;text-align:right">订单类型</label>
                    <div class="col-xs-8">
                        <select id="F_BillType" name="F_BillType" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_BillDate" style="line-height:30px;text-align:right">订单日期</label>
                    <div class="col-xs-8">
                        <input id="F_BillDate" name="F_BillDate" type="text" class="form-control" />
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_PostDate" style="line-height:30px;text-align:right">过账日期</label>
                    <div class="col-xs-8">
                        <input id="F_PostDate" name="F_PostDate" type="text" class="form-control" />
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_TruckID" style="line-height:30px;text-align:right">车　　辆</label>
                    <div class="col-xs-8">
                        <select id="F_TruckID" name="F_TruckID" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_DriverID" style="line-height:30px;text-align:right">司　　机</label>
                    <div class="col-xs-8">
                        <select id="F_DriverID" name="F_DriverID" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_IsStockFinished" style="line-height:30px;text-align:right">是否发货</label>
                    <div class="col-xs-8">
                        <select id="F_IsStockFinished" name="F_IsStockFinished" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_Status" style="line-height:30px;text-align:right">状　　态</label>
                    <div class="col-xs-8">
                        <select id="F_Status" name="F_Status" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_CreateUserID" style="line-height:30px;text-align:right">制 单 人</label>
                    <div class="col-xs-8">
                        <select id="F_CreateUserID" name="F_CreateUserID" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_UpdateUserID" style="line-height:30px;text-align:right">修 改 人</label>
                    <div class="col-xs-8">
                        <select id="F_UpdateUserID" name="F_UpdateUserID" class="form-control required"></select>
                    </div>
                </div>
            </div>
            <div class="formValue pull-left" style="width:230px;">
                <div class="row">
                    <label class="col-xs-4" for="F_ConfirmUserID" style="line-height:30px;text-align:right">审 批 人</label>
                    <div class="col-xs-8">
                        <select id="F_ConfirmUserID" name="F_ConfirmUserID" class="form-control required"></select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*<table class="form">
            <tr>
                <th class="formTitle">供 应 商</th>
                <td class="formValue">
                    <select id="F_SupplierID" name="F_SupplierID" class="form-control required"></select>
                </td>
                <th class="formTitle">采 购 员</th>
                <td class="formValue">
                    <select id="F_PurchaserID" name="F_PurchaserID" class="form-control required"></select>
                </td>
                <th class="formTitle">订单类型</th>
                <td class="formValue">
                    <select id="F_BillType" name="F_BillType" class="form-control required"></select>
                </td>
                <th class="formTitle">订单日期</th>
                <td class="formValue">
                    <input id="F_BillDate" name="F_BillDate" type="text" class="form-control" />
                </td>
                <th class="formTitle">过账日期</th>
                <td class="formValue">
                    <input id="F_PostDate" name="F_PostDate" type="text" class="form-control" />
                </td>
                <th class="formTitle">车　　辆</th>
                <td class="formValue">
                    <select id="F_TruckID" name="F_TruckID" class="form-control required"></select>
                </td>
                <th class="formTitle">司　　机</th>
                <td class="formValue">
                    <select id="F_DriverID" name="F_DriverID" class="form-control required"></select>
                </td>
            </tr>
            <tr>
                <th class="formTitle">是否发货</th>
                <td class="formValue">
                    <select id="F_IsStockFinished" name="F_IsStockFinished" class="form-control required"></select>
                </td>
                <th class="formTitle">状　　态</th>
                <td class="formValue">
                    <select id="F_Status" name="F_Status" class="form-control required"></select>
                </td>
                <th class="formTitle">制 单 人</th>
                <td class="formValue">
                    <input id="F_CreateUserID" name="F_CreateUserID" type="text" class="form-control" />
                </td>
                <th class="formTitle">修 改 人</th>
                <td class="formValue">
                    <input id="F_UpdateUserID" name="F_UpdateUserID" type="text" class="form-control" />
                </td>
                <th class="formTitle">审 批 人</th>
                <td class="formValue">
                    <input id="F_ConfirmUserID" name="F_ConfirmUserID" type="text" class="form-control" />
                </td>
            </tr>
        </table>*@
    <div class="gridPanel">
        <table id="gridList"></table>
    </div>
</form>

